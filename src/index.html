<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8" />
    <title>HTML 5 Web Storage</title>

    <!--link href="reset.css" type="text/css" rel="stylesheet" / -->
    <link href="style.css" type="text/css" rel="stylesheet" />

    <script>
        // add window eventListener for Load
        window.addEventListener("load",init);

        function init(){
			console.log(typeof(Storage));
            if(typeof Storage !=="undefined") {
                // display saved values if any
                display();

                // add click listener to button
                var button=document.getElementById("saveButton");
                button.addEventListener("click", saveInfo);
            }
            else{
                document.getElementById("wrapper").innerHTML="No local storage!";	
            }
        }

        function saveInfo(){
            // get values from input
            var custNameIn=document.getElementById("custName").value;
            var donutTypeIn=document.getElementById("donutType").value;
            var icingIn=document.getElementById("icing").value;
            var toppingsIn=document.getElementById("toppings").value;
            var donutQtyIn=document.getElementById("donutQty").value;

            // save to local storage
            localStorage.setItem("custName",custNameIn);
            localStorage.setItem("donutType",donutTypeIn);
            localStorage.setItem("icing",icingIn);
            localStorage.setItem("toppings",toppingsIn);
            localStorage.setItem("donutQty",donutQtyIn);

            display();
        }

        function display(){
            // get values from local storage
            var rightBox=document.getElementById("useroutputtext");          
            var custNameOut=localStorage.getItem("custName");
            var donutTypeOut=localStorage.getItem("donutType");
            var icingOut=localStorage.getItem("icing");
            var toppingsOut=localStorage.getItem("toppings");
            var donutQtyOut=localStorage.getItem("donutQty");
			
			var msg = "Customer Name:  "+custNameOut+"<br /><br />"
					+ "Donut Type:  "+donutTypeOut+"<br /><br />"
					+ "Icing:  "+icingOut+"<br /><br />"
					+ "Toppings:  "+toppingsOut+"<br /><br />"
					+ "Quantity:  "+donutQtyOut+"<br /><br />"
			
			console.log(msg);

            if (rightBox=="undefined"){
                document.getElementById("useroutputtext").innerHTML="whatever";
            }
            else { 
                document.getElementById("useroutputtext").innerHTML=msg;
            }
        }
    </script>
</head>

<body>
    <div id="main">
        <section id="userinput">
            INPUT <br>
            <hr />
            <br />
            <form id="inputForm">
                <fieldset id="orderForm">
                    <legend id="orderlegend">Donut Order Form</legend>
                    <label for="custName">Customer Name:</label> 
                    <br />
                    <input type="input" class="inputText" id="custName" size="30">
                    <br /> 
                    <br />
                    <label for="donutType">Donut Type:</label> 
                    <br />
                    <input type="input" class="inputText" id="donutType" size="30"> 
                    <br /> 
                    <br />
                    <label for="icing">Icing:</label> 
                    <br />
                    <input type="input" class="inputText" id="icing" size="30">
                    <br /> 
                    <br />
                    <label for="toppings">Toppings:</label> 
                    <br />
                    <input type="input" class="inputText" id="toppings" size="30">
                    <br /> 
                    <br />
                    <label for="donutqty">Quantity:</label> 
                    <br />
                    <input type="input" class="inputText" id="donutQty" size="10">
                    <br /> 
                    <br />
                    <input type="button" id="saveButton" value="Save">              
                </fieldset>
            </form>
        </section>

        <section id="useroutput">
			<div id="wrapper">
				OUTPUT <hr /><br />

				<div id="useroutputtext">
					

				</div>      
				<div id="image" >
					<image 	src="../images/donutsmore.jpeg" alt="marshmallow filled donut with marshmallow spread and a Hershey's chocolate square on top" id="outputphoto"></image>
				</div>
			</div>

        </section>
    </div>
</body>
</html>
